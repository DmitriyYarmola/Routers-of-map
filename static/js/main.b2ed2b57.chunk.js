(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{183:function(e,t,n){e.exports=n.p+"static/media/cross.e3380abb.svg"},203:function(e,t,n){e.exports=n(454)},208:function(e,t,n){},209:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},431:function(e,t,n){},454:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(14),i=n.n(c),l=(n(208),n(209),n(3)),s=n(54),u=n.n(s),d=n(109),p=function(e){return{type:"ERROR",payload:e}},f=function(e){return{type:"ADD_POINT",payload:e}},m=function(e){return{type:"DELETE_POINT",payload:e}},g=function(e){return{type:"MOVED_POINTS",payload:e}},O=function(e,t){return{type:"CHANGED_POSITION_POINTS",payload:e,id:t}},v="AIzaSyBrKOuFH3wbgwRkbQCx4p7jdzHgQvGPRZw",E=n(110),b=n.n(E),h=function(e){return b.a.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e.split(" ").join("+"),"&key=").concat(v)).then((function(e){return e.data}))},j=function(e){return b.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e.lat,",").concat(e.lng,"&key=").concat(v)).then((function(e){return e.data}))};!function(e){e.OK="OK",e[e.NotFoundPage=404]="NotFoundPage",e.NoRsult="ZERO_RESULTS"}(a||(a={}));var y=n(182),w=(n(232),n(233),function(){var e=Object(l.c)();return r.a.createElement("div",{className:"search-location"},r.a.createElement(y.a,{onSelect:function(t){var n,o=t.description;e((n=o,function(){var e=Object(d.a)(u.a.mark((function e(t){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:(o=e.sent).status===a.OK?t(f(o.results[0])):o.status===a.NoRsult&&t(p("The point was not found"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}))}),N=n(53),_=n(183),P=n.n(_),k=(n(234),function(e){var t=e.quote,n=e.index,a=Object(l.c)(),o=function(){a(m(t.place_id))};return r.a.createElement(N.b,{draggableId:t.place_id,index:n},(function(e){return r.a.createElement("div",Object.assign({className:"quote",ref:e.innerRef},e.draggableProps,e.dragHandleProps),t.formatted_address,r.a.createElement("img",{src:P.a,alt:"",className:"cross",onClick:o}))}))}),T=(n(235),r.a.memo((function(e){var t=e.points;return r.a.createElement("div",{className:"quote-list"},t.map((function(e,t){return r.a.createElement(k,{quote:e,index:t,key:e.place_id})})))}))),R=n(42),I=function(){var e=Object(l.d)((function(e){return e.PointsReducer.points}));console.log(e);var t=Object(l.c)();return r.a.createElement(N.a,{onDragEnd:function(n){if(n.destination&&n.destination.index!==n.source.index){var a=function(e,t,n){var a=Array.from(e),o=a.splice(t,1),r=Object(R.a)(o,1)[0];return a.splice(n,0,r),a}(e,n.source.index,n.destination.index);t(g(a))}},onDragStart:function(){window.navigator.vibrate&&window.navigator.vibrate(100)}},r.a.createElement(N.c,{droppableId:"list"},(function(t){return r.a.createElement("div",Object.assign({ref:t.innerRef},t.droppableProps),r.a.createElement(T,{points:e}),t.placeholder)})))},S=function(e){return{type:"GET_GEOLOCATION",payload:e}},D=function(e){return{type:"DISPTANCE_BEETWEN_POINTS",payload:e}},M=n(24),x=n(111),C=function(e){var t=e.places,n=e.travelMode,c=Object(o.useState)(),i=Object(R.a)(c,2),s=i[0],u=i[1],d=Object(l.c)();return Object(o.useEffect)((function(){var e=t.map((function(e){return{location:e.geometry.location,stopover:!0}})),o=e.shift().location,r=e.pop().location;(new window.google.maps.DirectionsService).route({origin:o,destination:r,travelMode:n,waypoints:e},(function(e,t){if(console.log(e),e.status===a.OK){var n=function(e){var t;return t=0,e.forEach((function(e){t+=Number(e.distance.value)})),Math.ceil(t/1e3)}(e.routes[0].legs);d(D(n));var o=e.routes[0].overview_path;u(o)}else e.status===a.NoRsult&&d(p("The route is broken. Please, refresh the page."))}))}),[t,n,d]),r.a.createElement(M.Polyline,{path:s,options:{strokeColor:"#ff2343",strokeOpacity:.8,strokeWeight:5,clickable:!0,geodesic:!0}})},G=n(201),L=function(e){var t=e.position,n=e.marker,c=e.numberMarker,i=Object(G.a)(e,["position","marker","numberMarker"]),s=Object(o.useState)(!1),f=Object(R.a)(s,2),m=f[0],g=f[1],v=Object(l.c)();return r.a.createElement(M.Marker,Object.assign({position:t,onClick:function(){g(!m)},draggable:!0,onDragEnd:function(e){var t,o,r=e.latLng.lat(),c=e.latLng.lng();v((t={lat:r,lng:c},o=n.place_id,function(){var e=Object(d.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:(r=e.sent).status===a.OK?n(O(r.results[0],o)):r.status===a.NoRsult&&n(p("The point was not found")),console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},label:{text:"".concat(c+1),color:"black",fontSize:"16px",fontWeight:"bold"}},i),m&&r.a.createElement(M.InfoWindow,null,r.a.createElement("div",null,n.formatted_address)))},A=function(e){var t,n;return t=n=0,e.forEach((function(e){t+=e.geometry.location.lat,n+=e.geometry.location.lng})),{lat:t/e.length,lng:n/e.length}},B=Object(x.a)(Object(x.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(v,"&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100vh"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),M.withScriptjs,M.withGoogleMap)((function(e){var t=e.geolocation,n=e.currentLocation,a=e.markers;return r.a.createElement(M.GoogleMap,{defaultCenter:t,defaultZoom:10,center:a.length<1?n||t:A(a),zoom:a.length>1?5:10},a.map((function(e,t){var n=e.geometry.location;return r.a.createElement(L,{key:e.place_id,marker:e,position:n,numberMarker:t})})),a.length>1&&r.a.createElement(C,{places:a,travelMode:window.google.maps.TravelMode.DRIVING}))})),W=n(456),K=(n(430),n(431),function(e){var t=e.distance;return r.a.createElement("div",{className:""},"".concat(t," km"))}),H=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.MapReducer.geolocation})),n=Object(l.d)((function(e){return e.PointsReducer.points})),a=Object(l.d)((function(e){return e.ErrorReducer.error})),c=Object(l.d)((function(e){return e.MapReducer.distanceBetweenPoints})),i=Object(l.d)((function(e){return e.PointsReducer.currentPoint})),s=Object(o.useCallback)((function(t){e(S(t))}),[e]);return Object(o.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude;s({lat:t,lng:n})}),(function(){var e,t,n=(e=0,t=180,Math.random()*(t-e)+e);s({lat:0,lng:n})})):alert("Geolocation is not supported by your browser")}),[s]),Object(o.useEffect)((function(){a&&(W.a.error(a),e(p("")))}),[e,a]),t&&r.a.createElement("div",{className:"page_points-map"},r.a.createElement("div",{className:"points"},r.a.createElement("div",{className:"add-point"},r.a.createElement(w,null)),r.a.createElement("div",{className:"label-distance"},c&&r.a.createElement(K,{distance:c})),r.a.createElement("div",{className:"list-point"},r.a.createElement(I,null))),r.a.createElement("div",{className:"map"},r.a.createElement(B,{markers:n,currentLocation:null===i||void 0===i?void 0:i.geometry.location,geolocation:t})))};function q(){return r.a.createElement(H,null)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(18),V=n(198),F=n(9),U={geolocation:null,distanceBetweenPoints:null},Z=n(81),J={points:[],currentPoint:null},Q={error:null},X=Object(z.c)({PointsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POINT":return Object(F.a)(Object(F.a)({},e),{},{points:[].concat(Object(Z.a)(e.points),[t.payload]),currentPoint:t.payload});case"DELETE_POINT":return Object(F.a)(Object(F.a)({},e),{},{points:Object(Z.a)(e.points.filter((function(e){return e.place_id!==t.payload})))});case"MOVED_POINTS":return Object(F.a)(Object(F.a)({},e),{},{points:t.payload});case"CHANGED_POSITION_POINTS":return Object(F.a)(Object(F.a)({},e),{},{points:Object(Z.a)(e.points.map((function(e){return e.place_id===t.id?t.payload:e})))});default:return e}},MapReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GEOLOCATION":return Object(F.a)(Object(F.a)({},e),{},{geolocation:t.payload});case"DISPTANCE_BEETWEN_POINTS":return Object(F.a)(Object(F.a)({},e),{},{distanceBetweenPoints:t.payload});default:return e}},ErrorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return Object(F.a)(Object(F.a)({},e),{},{error:t.payload});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose,Y=Object(z.e)(X,$(Object(z.a)(V.a)));i.a.render(r.a.createElement(l.a,{store:Y},r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[203,1,2]]]);
//# sourceMappingURL=main.b2ed2b57.chunk.js.map